meta
{
  title: "Colombia specific rules";
  icon: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAACXBIWXMAAA7EAAAOxAGVKw4bAAACrklEQVR42u3ZMUoDQRiG4T9mIOtKSq29gUUu4E20srS2FTyI3sMiV/AGaQTRIgF14+KusRVZHOvZ5ymHVB/My5CNAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAQkx+H3QPR2cRcWwaKM4qnTzf/TxIAz86j4hTW0FxlhGRDQAwEgIAAgAIACAAgAAAAgAIACAAgAAAAgAIACAAgAAAAgAIACAAgAAAAgAIACAAgAAAAgAIACAAgAAAAgAIACAAgAAAAgAIACAAgAAAAgAIACAAgACAAJgABAAQAEAAAAEABAAQAEAAAAEABAAQAEAAAAEABAAQAEAAAAEABAAQAEAAAAEABAAQAEAAAAEABAAQAEAAAAEABAAQAEAAAAEABAAQAEAAAAEAAQAEABAAQACAUQagaVPUs84yUJimTfkAbLZV1LM3a0FhNtsqH4DFzUW8vB5YCwpzOH+PiKvMC6CpLAUlvgCaf7wAPvuppaBAQ3fbVwAYMQEAAQAEABAAQAAAAQAEABAAQAAAAQAEABAAQAAAAQAEABAAQAAAAQAEABAAQAAAAQAEABAAQAAAAQAEABAAQAAAAQAEABAAQAAAAQAEAPg7AGnXRzeZWgZKu+y7PrpcAOZ9G+tUWwsKM+/bWOcCcP10H9VXZy0ozMdeistcABbNY+zvBABKs52k/H8ALj+Uaehu+woAIyYAIACAAAACAAgAIACAAAACAAgAIACAAAACAAgAIACAAAACAAgAIACAAAACAAgAIACAAAACAAgAIACAAAACAAgAIACAAAACAAgAIACAAAACAAgACMDA2W1ELE0DxVmZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAYn0D8fk8qwS1ctwAAAAASUVORK5CYII=";
  version: "2021-10-30";
  description: "Validation rules for the most common issues found in Colombia. Messages are in Spanish, with suggestion and fixes. This is based on the Colombian Guide for Mapping which can be found in the OSM Wiki.";
  author: "Andres Gomez (AngocA) - Maptime Bogota";
  link: "https://github.com/MaptimeBogota/ColombianJosmValidator";
}


/***** RIOS Y QUEBRADAS *****/

/* Nombres de ríos. Deben comenzar con la palabra Río, Quebrada u otro nombre de la expresión regular. */
*["waterway"="river"]["name"]["name" !~ /^(Río|Quebrada|Arroyo|Caño|Chorro|Cañada|Canal|Estero|Nacimiento|Zanjón) /][inside("CO")] {
    throwWarning: "En los cuerpos de agua de tipo \"river\" o \"stream\", la etiqueta name debe comenzar con: Río, Quebrada, Arroyo, Caño, Chorro, Cañada, Canal, Estero, Nacimiento, Zanjón seguido del nombre como tal";

   fixAdd: "name=Río {1.value}";

   suggestAlternative: "name=\"Río {1.value}\"";

   group: "Colombia - Cuerpos de agua";

   /* Assertions for unit tests */
   assertMatch: "way waterway=river name=Magdalena";
   assertMatch: "way waterway=river name=\"Rio Magdalena\"";
   assertMatch: "way waterway=river name=\"La Vieja\"";
   assertNoMatch: "way waterway=river name=\"Río Magdalena\"";
   assertNoMatch: "way waterway=river name=\"Quebrada La Vieja\"";
}

/* Nombres de quebradas. Deben comenzar con la palabra Quebrada, Río u otro nombre de la expresión regular. */
*["waterway"="stream"]["name"]["name" !~ /^(Río|Quebrada|Arroyo|Caño|Chorro|Cañada|Canal|Estero|Nacimiento|Zanjón) /][inside("CO")] {
    throwWarning: "En los cuerpos de agua de tipo \"stream\" o \"river\", la etiqueta name debe comenzar con: Río, Quebrada, Arroyo, Caño, Chorro, Cañada, Canal, Estero, Nacimiento, Zanjón seguido del nombre como tal";

   fixAdd: "name=Quebrada {1.value}";

   suggestAlternative: "name=\"Quebrada {1.value}\"";

   group: "Colombia - Cuerpos de agua";

   /* Assertions for unit tests */
   assertMatch: "way waterway=stream name=Magdalena";
   assertMatch: "way waterway=stream name=\"Rio Magdalena\"";
   assertMatch: "way waterway=stream name=\"La Vieja\"";
   assertNoMatch: "way waterway=stream name=\"Río Magdalena\"";
   assertNoMatch: "way waterway=stream name=\"Quebrada La Vieja\"";
}


/***** VIAS *****/

/* No hay autopistas - motorway en Colombia. */
*["highway"="motorway"][inside("CO")] {
    throwWarning: "En Colombia no hay autopistas como tal, inclusive si se llaman así";

   fixAdd: "highway=trunk";

   suggestAlternative: "highway=trunk";

   group: "Colombia - Vías";

   /* Assertions for unit tests */
   assertMatch: "way highway=motorway";
   assertNoMatch: "way highway=trunk";
   assertNoMatch: "way highway=primary";
}

/* No hay living streets en Colombia. Hay vías residenciales (Cuando tienen nombre). */
*["highway"="living_street"]["name"][inside("CO")] {
    throwWarning: "En Colombia no hay como tal living streets, en cambio hay residential o pedestrian";

   fixAdd: "highway=residential";

   suggestAlternative: "highway=residential o highway=pedestrian";

   group: "Colombia - Vías";

   /* Assertions for unit tests */
   assertMatch: "way highway=living_street name=\"Calle 1\"";
   assertNoMatch: "way highway=residential";
   assertNoMatch: "way highway=pedestrian";
}

/* No hay living streets en Colombia. Hay vías peatonales (Cuando no tienen nombre). */
*["highway"="living_street"][!"name"][inside("CO")] {
    throwWarning: "En Colombia no hay como tal living streets, en cambio hay service o pedestrian";

   fixAdd: "highway=service";

   suggestAlternative: "highway=service o highway=pedestrian";

   group: "Colombia - Vías";

   /* Assertions for unit tests */
   assertMatch: "way highway=living_street";
   assertNoMatch: "way highway=service";
   assertNoMatch: "way highway=pedestrian";
}

/* Las vías desconocidas no se deben mapear como unclassified. */
*["highway"="unclassified"][inside("CO")] {
    throwWarning: "Unclassified es la más baja categoría de vías para automóviles en Reino Unido. Esta categorización es diferente en Colombia";

   fixAdd: "highway=road";

   suggestAlternative: "highway=road, highway=service, highway=track o highway=path";

   group: "Colombia - Vías";

   /* Assertions for unit tests */
   assertMatch: "way highway=unclassified";
   assertNoMatch: "way highway=road";
   assertNoMatch: "way highway=track";
   assertNoMatch: "way highway=path";
}

/* Las vías en Colombia deben indicar el tipo de vía en su nombre seguido de su numeración. */
*["highway" =~ /trunk|primary|secondary|tertiary|residential|link/]["name"]["name" !~ /^((Calle|Avenida Calle|Carrera|Avenida Carrera|Transversal|Avenida Transversal|Diagonal|Avenida Diagonal) [1-9][0-9]{0,2}[A-Z]{0,1}( Bis( [A-Z]){0,1}){0,1}( Este| Sur| Oeste| Norte){0,1}|Vía .*)$/][inside("CO")] {
    throwWarning: "Los nombres de vías no deben contener abreviaturas, y deben seguir la estructura de nombre";

   group: "Colombia - Vías";

   /* Assertions for unit tests */
   assertMatch: "way highway=primary name=Rotonda";
   assertNoMatch: "way highway=secondary";
   assertNoMatch: "way highway=tertiary name=\"Calle 1\"";
   assertNoMatch: "way highway=service";
}

/* Los nombres alternos de las vías no deben tener el nombre numérico. */
*["highway" =~ /trunk|primary|secondary|tertiary|residential|link/]["alt_name"]["alt_name" =~ /^(Calle|Avenida Calle|Carrera|Avenida Carrera|Transversal|Avenida Transversal|Diagonal|Avenida Diagonal) [1-9][0-9]{0,2}[A-Z]{0,1}( Bis( [A-Z]){0,1}){0,1}( Este| Sur| Oeste| Norte){0,1}$/][inside("CO")] {
    throwWarning: "El nombre alterno no puede ser el nombre numérico. Puede que lo tengas que invertir con name";

   group: "Colombia - Vías";

   /* Assertions for unit tests */
   assertMatch: "way highway=tertiary alt_name=\"Calle 1\"";
   assertNoMatch: "way highway=primary name=Rotonda";
   assertNoMatch: "way highway=secondary";
   assertNoMatch: "way highway=service";
}


/***** DIRECCIONES *****/

/* Las direcciones en Colombia, en el nombre de vía solo deben indicar el tipo y número. */
*["addr:street"]["addr:street" !~ /^(Calle|Avenida Calle|Carrera|Avenida Carrera|Transversal|Avenida Transversal|Diagonal|Avenida Diagonal) [1-9][0-9]{0,2}[A-Z]{0,1}( Bis( [A-Z]){0,1}){0,1}( Este| Sur| Oeste| Norte){0,1}$/][inside("CO")] {
    throwWarning: "En las direcciones, los nombres de vías no deben contener abreviaturas, ni deben tener el número del complemento, ni espacios extras";

   group: "Colombia - Direcciones";

   /* Assertions for unit tests */
   assertMatch: "way addr:street=Rotonda";
   assertNoMatch: "way addr:street=\"Calle 1\"";
}

/* El número de casa en la dirección tiene 2 componentes no más. */
*["addr:housenumber"]["addr:housenumber" !~ /^[1-9][0-9]{0,2}[A-Z]{0,1}( Bis( [A-Z]){0,1}){0,1}( Este| Sur| Oeste| Norte){0,1}-[1-9][0-9]{0,2}$/][inside("CO")] {
    throwWarning: "En las direcciones, los números de immueble tienen 2 números separados por guíon, donde el primer número hace referencia a la vía con que hace el cruce, y el segundo es la distancia desde la esquina";

   group: "Colombia - Direcciones";

   /* Assertions for unit tests */
   assertMatch: "way addr:housenumber=56";
   assertMatch: "way addr:housenumber=\"61 - 31\"";
   assertNoMatch: "way addr:housenumber=61-31";
}


/***** TELÉFONO *****/

/* Los número de teléfono de Colombia deben seguir el estándar internacional, no considerarse como llamadas locales.
Los números que pueden asignar los operadores son:
Claro: 310, 311, 312, 313, 314, 320, 321, 322, 323
Movistar: 315, 316, 317, 318
ETB: 305
VirginMobile: 319
Avantel: 350, 351
Tigo: 300, 301, 302
Tomado de: https://ayuda.tigo.com.co/hc/es/articles/115012920068-Indicativos-telef%C3%B3nicos-Colombia-General
Sin embargo, los números pueden cambiar de operador por portabilidad numérica.
*/
*[/^(phone|phone:mobile|fax|contact:phone|contact:mobile|contact:fax|emergency:phone)$/][/^(phone|phone:mobile|fax|contact:phone|contact:mobile|contact:fax|emergency:phone)$/ !~ /^\+57 (601|602|604|605|606|607|608|300|301|302|305|310|311|312|313|314|315|316|317|318|319|320|321|322|323|350|351) [0-9]{7}(;\+57 (601|602|604|605|606|607|608|300|301|302|305|310|311|312|313|314|315|316|317|318|319|320|321|322|323|350|351) [0-9]{7})*$/][inside("CO")] {
    throwWarning: "Los números de Colombia comienzan con +57, después 3 dígitos de código de área, y finalmente el número como tal";

   group: "Colombia - Teléfonos";

   /* Assertions for unit tests */
   assertNoMatch: "node phone:mobile=\"+57 316 6214030\"";
   assertMatch: "node phone=\"+57 1 2219872\"";
   assertMatch: "node emergency:phone=\"+57 1 2222252\"";
   assertMatch: "node phone=\"316 6214032\"";
   assertMatch: "node phone=00573166214032";
}

